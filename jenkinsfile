pipeline {
    agent any

    environment {
        AZURE_CREDENTIALS = credentials('ARM_CLIENT_ID') // Reference the Azure service principal credentials
    }

    stages {
        stage('Azure Resource Group Creation') {
            steps {
                script {
                    // Run Azure CLI command to create a resource group
                    withCredentials([azureServicePrincipal(credentialsId: AZURE_CREDENTIALS, 
                                                          subscriptionId: 'ARM_SUBSCRIPTION_ID')]) {
                        azureCLI(
                            script: 'group create --name MyResourceGroup --location eastus2',
                            installation: 'AzureCLI'
                        )
                    }
                }
            }
        }
    }
}
